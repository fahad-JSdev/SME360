<!DOCTYPE html>
<link rel="stylesheet" href="../assets/themes/main.css" />

<script src="../../node_modules/jquery/dist/jquery.min.js"></script>
<script src="../../node_modules/gridjs/dist/gridjs.umd.js"></script>
<script src="../../node_modules/ag-grid-community/dist/ag-grid-community.min.noStyle.js"></script>
<!-- Include the core CSS, this is needed by the grid -->
<link
  rel="stylesheet"
  href="../../node_modules/ag-grid-community/styles/ag-grid.css"
/>
<!-- Include the theme CSS, only need to import the theme you are going to use -->
<link
  rel="stylesheet"
  href="../../node_modules/ag-grid-community/styles/ag-theme-alpine.css"
/>

<html lang="en" dir="ltr">
  <script src="../widgets/autoSearchText.js"></script>
  <script src="../widgets/actionbar.js"></script>
  <script src="../widgets/tab.js"></script>
  <script src="../widgets/gridHelper.js"></script>
  <script src="../../node_modules/list.js/dist/list.min.js"></script>
  <script src="../widgets/snackbox.js"></script>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EXPENSE</title>
  </head>
  <body>
    <div class="MainParent">
      <div class="sidebar close" id="sidebar">
        <ul class="nav-links">
          <li class="main-menu">
            <a href="#" class="home">
              <img
                src="../assets/images/home.png"
                alt="home"
                class="home"
                onclick=""
              />
              <span class="link_name home">Apps</span>
            </a>
            <ul class="sub-menu blank">
              <li><a class="link_name home" href="#">Apps</a></li>
            </ul>
          </li>

          <li class="main-menu">
            <a href="#" class="expenseHome">
              <img
                src="../assets/images/home1.png"
                alt="expenseHome"
                class="expenseHome"
                onclick=""
              />
              <span class="link_name expenseHome">Home</span>
            </a>
            <ul class="sub-menu blank">
              <li>
                <a class="link_name expenseHome" href="#">Home</a>
              </li>
            </ul>
          </li>

          <li class="main-menu ">
            <a href="#" class="add_site">
              <img
                src="../assets/images/project-icon.png"
                alt="project"
                class="add_site"
              />
              <span class="link_name add_site" href="#">Project</span>
            </a>
            <ul class="sub-menu">
              <li>
                <a class="link_name add_site" href="#">Project</a>
              </li>
            </ul>
          </li>
          <li class="main-menu ">
            <div class="iocn-link">
              <a href="#"  class="view">
                <img src="../assets/images/labour-icon-2.png" class="view" />
                <span class="link_name view" href="#">Labour</span>
              </a>
            </div>
            <ul class="sub-menu blank">
              <li>
                <a class="link_name view" href="#">Labour</a>
              </li>
            </ul>
          </li>
        </ul>
      </div>

      <section class="home-section" id="home-section"></section>
    </div>
  </body>
  <script>
    // function loadApp() {
    //   $(".home-section").load("../app.html");
    // }
    let arrow = document.querySelectorAll(".arrow");
    for (var i = 0; i < arrow.length; i++) {
      arrow[i].addEventListener("click", (e) => {
        let arrowParent = e.target.parentElement.parentElement; //selecting main parent of arrow
        arrowParent.classList.toggle("showMenu");
      });
    }

    function openaddexpensechild() {
      window.open("./project/addexpense.html", "_blank", "resizable=no,frame=0");
    }

    function opensitechild() {
      window.open("./project/addsite.html", "_blank", "resizable=no,frame=0");
    }

    function openlabourchild() {
      window.open("./labour/add_labour.html", "-blank", "resizable=1,frame=0");
    }

    var current_page = null;
    $(document).ready(function view() {
      $(".view").click(menuOnClick);
      $(".add_site").click(menuOnClick);
      $(".home").click(menuOnClick);
      $(".expenseHome").click(menuOnClick);
    });
    
    function menuOnClick(e) {
      {
        console.log("side navw : clicked ->", e, e.target.className);
        if (current_page != e.target.className) {
          var path = null;
          var i = 0;
          do {
            switch (e.target.classList[i]) {
              case "add_site":
                path = "./project/project-view.html";
                break;
              case "view":
                path = "./labour/labour_view.html";
                break;
              case "expenseHome":
                // path="./stock_main.html";
                window.open(
                "../expense/expense_main.html",
                "_self",
                "resizable=0,frame=0"
                );
                window.resizeTo(getWidth(), getHeight());
              break;
              case "home":
              path="../app.html";
                break;
            }
            i++;
          } while (path == null && i < e.target.classList.length);
          if (path != null) {
            $(".home-section").load(path);
            current_page = e.target.className;
          }
        }
      }
    }

    //Set all css dimen here
    console.log("start");
    function getWidth() {
      return window.screen.availWidth;
    }
    function getHeight() {
      return window.screen.availHeight;
    }

    function setDime(w, h) {
      if (w != undefined) {
        $(".sidebar").css("width", (w * 3.5) / 100);
        $(".home-section").css("width", (w * 96.5) / 100);
        $(".home-section").css("left", (w * 3.5) / 100);
      } else console.log("dime not defined");
    }

    try {
      setDime(window.screen.availWidth, window.screen.availHeight);
    } catch (err) {
      console.log("-dime not defined");
    }
  </script>
</html>
